digraph {
	graph [
		splines = true
		layout = dot
	]
	{
		node [ shape = none margin = 0 fontname="Candara" ]
		users [
			label = <
			<table cellspacing="0" border="0" cellborder="1">
				<tr>
					<td colspan="3" bgcolor="darkslategray">
						<font color="white">
							Users
						</font>
					</td>
				</tr>
				<tr>
					<td>PK</td>
					<td align="left">id</td>
					<td align="left">bigint</td>
				</tr>
				<tr>
					<td></td>
					<td>
						email<br align="left"/>
					</td>
					<td>
						varchar(255)<br align="left"/>
					</td>
				</tr>
			</table>
			>
		]
		native_credentials [
			label = <
			<table cellspacing="0" border="0" cellborder="1">
				<tr>
					<td colspan="3" bgcolor="darkslategray">
						<font color="white">
							Native Credentials
						</font>
					</td>
				</tr>
				<tr>
					<td>PK</td>
					<td align="left">id</td>
					<td align="left">bigint</td>
				</tr>
				<tr>
					<td>FK</td>
					<td align="left">user_id</td>
					<td align="left">bigint</td>
				</tr>
				<tr>
					<td></td>
					<td>
						password<br align="left"/>
					</td>
					<td>
						varchar(255)<br align="left"/>
					</td>
				</tr>
			</table>
			>
		]
		currencies [
			label = <
			<table cellspacing="0" border="0" cellborder="1">
				<tr>
					<td colspan="3" bgcolor="darkslategray">
						<font color="white">
							Currencies
						</font>
					</td>
				</tr>
				<tr>
					<td>PK</td>
					<td align="left">id</td>
					<td align="left">bigint</td>
				</tr>
				<tr>
					<td>FK</td>
					<td align="left">user_id</td>
					<td align="left">bigint</td>
				</tr>
				<tr>
					<td></td>
					<td align="left">
						code<br align="left"/>
						name<br align="left"/>
					</td>
					<td align="left">
						varchar(255)<br align="left"/>
						varchar(255)<br align="left"/>
					</td>
				</tr>
			</table>
			>
		]
		accounts [
			label = <
			<table cellspacing="0" border="0" cellborder="1">
				<tr>
					<td colspan="3" bgcolor="darkslategray">
						<font color="white">
							Accounts
						</font>
					</td>
				</tr>
				<tr>
					<td>PK</td>
					<td align="left">id</td>
					<td align="left">bigint</td>
				</tr>
				<tr>
					<td>FK</td>
					<td align="left">user_id</td>
					<td align="left">bigint</td>
				</tr>
				<tr>
					<td>FK</td>
					<td align="left">currency_id</td>
					<td align="left">bigint</td>
				</tr>
				<tr>
					<td></td>
					<td align="left">
						name<br align="left"/>
						description<br align="left"/>
						ownership<br align="left"/>
					</td>
					<td align="left">
						varchar(255)<br align="left"/>
						nullable text<br align="left"/>
						enum(asset,liability)<br align="left"/>
					</td>
				</tr>
			</table>
			>
		]
		monthly_account_values [
			label = <
			<table cellspacing="0" border="0" cellborder="1">
				<tr>
					<td colspan="3" bgcolor="darkslategray">
						<font color="white">
							Monthly Account Values
						</font>
					</td>
				</tr>
				<tr>
					<td>PK</td>
					<td align="left">id</td>
					<td align="left">bigint</td>
				</tr>
				<tr>
					<td>FK</td>
					<td align="left">account_id</td>
					<td align="left">bigint</td>
				</tr>
				<tr>
					<td></td>
					<td align="left">
						started_at<br align="left"/>
						value<br align="left"/>
					</td>
					<td align="left">
						datetime<br align="left"/>
						varchar(255)<br align="left"/>
					</td>
				</tr>
			</table>
			>
		]
		events [
			label = <
			<table cellspacing="0" border="0" cellborder="1">
				<tr>
					<td colspan="3" bgcolor="darkslategray">
						<font color="white">
							Events
						</font>
					</td>
				</tr>
				<tr>
					<td>PK</td>
					<td align="left">id</td>
					<td align="left">bigint</td>
				</tr>
				<tr>
					<td>FK</td>
					<td align="left">user_id</td>
					<td align="left">bigint</td>
				</tr>
				<tr>
					<td></td>
					<td align="left">
						name<br align="left"/>
						description<br align="left"/>
						kind<br align="left"/>
					</td>
					<td align="left">
						varchar(255)<br align="left"/>
						nullable text<br align="left"/>
						enum(timeout,interval,manual)<br align="left"/>
					</td>
				</tr>
			</table>
			>
		]
		timeout_events [
			label = <
			<table cellspacing="0" border="0" cellborder="1">
				<tr>
					<td colspan="3" bgcolor="darkslategray">
						<font color="white">
							Timeout Events
						</font>
					</td>
				</tr>
				<tr>
					<td>PK</td>
					<td align="left">id</td>
					<td align="left">bigint</td>
				</tr>
				<tr>
					<td>FK</td>
					<td align="left">event_id</td>
					<td align="left">bigint</td>
				</tr>
				<tr>
					<td></td>
					<td align="left">
						expired_at<br align="left"/>
					</td>
					<td align="left">
						datetime<br align="left"/>
					</td>
				</tr>
			</table>
			>
		]
		interval_events [
			label = <
			<table cellspacing="0" border="0" cellborder="1">
				<tr>
					<td colspan="3" bgcolor="darkslategray">
						<font color="white">
							Interval Events
						</font>
					</td>
				</tr>
				<tr>
					<td>PK</td>
					<td align="left">id</td>
					<td align="left">bigint</td>
				</tr>
				<tr>
					<td>FK</td>
					<td align="left">event_id</td>
					<td align="left">bigint</td>
				</tr>
				<tr>
					<td></td>
					<td align="left">
						schedule<br align="left"/>
					</td>
					<td align="left">
						varchar(255)<br align="left"/>
					</td>
				</tr>
			</table>
			>
		]

		event_started_times [
			label = <
			<table cellspacing="0" border="0" cellborder="1">
				<tr>
					<td colspan="3" bgcolor="darkslategray">
						<font color="white">
							Event Started Times
						</font>
					</td>
				</tr>
				<tr>
					<td>PK</td>
					<td align="left">id</td>
					<td align="left">bigint</td>
				</tr>
				<tr>
					<td>FK</td>
					<td align="left">event_id</td>
					<td align="left">bigint</td>
				</tr>
				<tr>
					<td></td>
					<td align="left">
						started_at<br align="left"/>
					</td>
					<td align="left">
						datetime<br align="left"/>
					</td>
				</tr>
			</table>
			>
		]
	}

	edge [ dir = "both" ]
	{
		// zero or one
		edge [
			arrowhead = noneteeodot
			arrowtail = noneteetee
		]

		users -> native_credentials
		events -> timeout_events
		events -> interval_events
	}

	{
		// zero to many
		edge [
			arrowhead = nonecrowodot
			arrowtail = noneteetee
		]

		users -> currencies
		users -> accounts
		currencies -> accounts
		accounts -> monthly_account_values
		users -> events
		events -> event_started_times
	}
}
